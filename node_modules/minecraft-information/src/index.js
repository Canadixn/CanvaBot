const axios = require('axios');
const key = require('./src/config.json').hypixelKEY;

const style = {
    Reset:"\x1b[0m",
    Bright:"\x1b[1m",
    Dim:"\x1b[2m",
    Underscore:"\x1b[4m",
    Blink:"\x1b[5m",
    Reverse:"\x1b[7m",
    Hidden:"\x1b[8m",
    //
    FgBlack:"\x1b[30m",
    FgRed:"\x1b[31m",
    FgGreen:"\x1b[32m",
    FgYellow:"\x1b[33m",
    FgBlue:"\x1b[34m",
    FgMagenta:"\x1b[35m",
    FgCyan:"\x1b[36m",
    FgWhite:"\x1b[37m",
    //
    BgBlack:"\x1b[40m",
    BgRed:"\x1b[41m",
    BgGreen:"\x1b[42m",
    BgYellow:"\x1b[43m",
    BgBlue:"\x1b[44m",
    BgMagenta:"\x1b[45m",
    BgCyan:"\x1b[46m",
    BgWhite:"\x1b[47m"
}

const head = (name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    return `https://cravatar.eu/helmhead/${name}/600.png`;
};

const avatar = (name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    return `https://cravatar.eu/helmavatar/${name}/600.png`;
};

const body = async(name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    const res = await axios.get(`https://api.mojang.com/users/profiles/minecraft/${name}`);
    let result = await `https://crafatar.com/renders/body/${res.data.id}?size=512&default=MHF_Steve&overlay&scale=10.png`;
    return result;
};

const skin = async(name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    const res = await axios.get(`https://api.mojang.com/users/profiles/minecraft/${name}`);
    return `https://crafatar.com/skins/${res.data.id}?size=512&default=MHF_Steve&overlay&scale=10.png`;
};

const cape = async(name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    const uuid = await axios.get(`https://api.mojang.com/users/profiles/minecraft/${name}`)
    const res = await `https://crafatar.com/capes/${uuid.data.id}?size=512&scale=10.png`
    return res;
}

const server = async(ip) => {
    if(!ip) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft ip server has not been provided${style.Reset}`);
    const api = await axios.get(`https://api.mcsrvstat.us/2/${ip}`)
    return api.data;
};

const server_icono = (ip) => {
    if(!ip) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft ip server has not been provided${style.Reset}`);
    return `https://api.mcsrvstat.us/icon/${ip}`;
};


const profile = async(name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    const res = await axios.get(`https://api.mojang.com/users/profiles/minecraft/${name}`);
    const data = await axios.get(`https://sessionserver.mojang.com/session/minecraft/profile/${res.data.id}`);
    return data.data;
};

const mojangStatus = async() => {
    const res = await axios.get(`https://status.mojang.com/check`);
    return res.data;
}

const hypixelData = async(name) => {
    if(!name) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}A minecraft user name has not been provided${style.Reset}`);
    const uuid = await axios.get(`https://api.mojang.com/users/profiles/minecraft/${name}`);
    const res = await axios.get(`https://api.hypixel.net/player?key=${key}&uuid=${uuid.data.id}`);
    return res.data;
}

//fun

const achievement = (title, content) => {
    if(!title || !content) return console.log(`${style.Underscore}${style.Bright}MC-INFORMATION${style.Reset} ${style.BgRed}${style.Bright}ERROR:${style.Reset} ${style.Bright}Title or content has not been provided${style.Reset}`);
    let links = [
        `https://minecraftskinstealer.com/achievement/1/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/2/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/3/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/4/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/5/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/6/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/7/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/8/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/9/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/10/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/11/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/12/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/13/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/14/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/15/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/16/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/17/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/18/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/19/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/20/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/21/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/22/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/23/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/24/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/25/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/26/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/27/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/28/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/29/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/30/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/31/${title}/${content}`, 
        `https://minecraftskinstealer.com/achievement/32/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/33/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/34/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/35/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/36/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/37/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/38/${title}/${content}`,
        `https://minecraftskinstealer.com/achievement/39/${title}/${content}`,
    ]
    let res = links[Math.floor(Math.random() * links.length)]
    return res;
}

module.exports = {
    head,
    avatar,
    body,
    skin,
    cape,
    server,
    server_icono,
    profile,
    mojangStatus,
    achievement,
    hypixelData
};